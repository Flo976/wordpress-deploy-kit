# WordPress Deployment Environment Variables
# Copy this file to 'env' and customize the values below

#==============================================================================
# INFRASTRUCTURE & NETWORK
#==============================================================================

# System hostname
HOSTNAME=wp-local

# Domain name (use .local for development, real domain for production)
DOMAIN=example.local

# Server IP address (leave empty for auto-detection)
PUBLIC_IP=

# HTTP/HTTPS ports
HTTP_PORT=80
HTTPS_PORT=443

# FTP configuration
FTP_PORT=21
FTP_PASSIVE_MIN=40000
FTP_PASSIVE_MAX=40050

#==============================================================================
# WORDPRESS CONFIGURATION
#==============================================================================

# Database settings
WP_DB_NAME=wordpress
WP_DB_USER=wpuser
WP_DB_PASSWORD=changeme
WP_TABLE_PREFIX=wp_

# WordPress admin user
WP_ADMIN_USER=admin
WP_ADMIN_PASSWORD=admin123!
WP_ADMIN_EMAIL=admin@example.local

# WordPress settings
WP_TITLE="Mon Site WordPress"
WP_LOCALE=fr_FR
WP_DEBUG=false

# WordPress URLs (auto-configured based on domain if left empty)
WP_URL=
WP_HOME=

#==============================================================================
# MARIADB CONFIGURATION
#==============================================================================

# MariaDB version (LTS recommended)
MARIADB_VERSION="11.4"

# Root password
MARIADB_ROOT_PASSWORD=supersecret

# Performance tuning
INNODB_BUFFER_POOL_SIZE=512M
INNODB_LOG_FILE_SIZE=256M
INNODB_LOG_FILES_IN_GROUP=2

# Connection settings
MAX_CONNECTIONS=200
MAX_ALLOWED_PACKET=64M

# Query cache (recommended: off for performance)
QUERY_CACHE_TYPE=0
QUERY_CACHE_SIZE=0

# Temporary tables
TMP_TABLE_SIZE=128M
MAX_HEAP_TABLE_SIZE=128M

# Slow query log
SLOW_QUERY_LOG=ON
LONG_QUERY_TIME=2

#==============================================================================
# PHP-FPM CONFIGURATION
#==============================================================================

# PHP version
PHP_VERSION=8.4

# Process manager settings
PHP_FPM_PM=dynamic
PHP_FPM_PM_MAX_CHILDREN=20
PHP_FPM_PM_START_SERVERS=4
PHP_FPM_PM_MIN_SPARE_SERVERS=2
PHP_FPM_PM_MAX_SPARE_SERVERS=6
PHP_FPM_PM_MAX_REQUESTS=1000

# Memory settings
PHP_MEMORY_LIMIT=256M
PHP_UPLOAD_MAX_FILESIZE=64M
PHP_POST_MAX_SIZE=64M
PHP_MAX_EXECUTION_TIME=300
PHP_MAX_INPUT_VARS=3000

# OPcache settings
OPCACHE_ENABLE=1
OPCACHE_MEMORY_CONSUMPTION=256
OPCACHE_MAX_ACCELERATED_FILES=100000
OPCACHE_VALIDATE_TIMESTAMPS=0
OPCACHE_REVALIDATE_FREQ=0
OPCACHE_SAVE_COMMENTS=0
OPCACHE_INTERNED_STRINGS_BUFFER=64

# OPcache JIT (enable with caution, test thoroughly)
OPCACHE_JIT=1255
OPCACHE_JIT_BUFFER_SIZE=128M

# Realpath cache
REALPATH_CACHE_SIZE=256k
REALPATH_CACHE_TTL=600

# Session settings
SESSION_SAVE_HANDLER=files
SESSION_GC_MAXLIFETIME=7200

#==============================================================================
# APACHE CONFIGURATION
#==============================================================================

# MPM Event settings
APACHE_MPM_EVENT_MAX_REQUEST_WORKERS=256
APACHE_MPM_EVENT_THREADS_PER_CHILD=25
APACHE_MPM_EVENT_SERVER_LIMIT=16
APACHE_MPM_EVENT_THREAD_LIMIT=64

# Feature flags
ENABLE_HTTP2=true
ENABLE_BROTLI=true
ENABLE_DEFLATE=true

# Security headers
ENABLE_SECURITY_HEADERS=true

# Server signature
APACHE_SERVER_TOKENS=Prod
APACHE_SERVER_SIGNATURE=Off

# Keep alive settings
KEEP_ALIVE=On
KEEP_ALIVE_TIMEOUT=5
MAX_KEEP_ALIVE_REQUESTS=100

#==============================================================================
# FTP CONFIGURATION
#==============================================================================

# FTP user credentials
FTP_USER=ftpuser
FTP_PASSWORD=changeme

# FTP home directory (WordPress root)
FTP_HOME=/var/www/html

# FTPS settings
FTP_SSL_ENABLE=YES
FTP_FORCE_SSL=YES
FTP_SSL_SSLV2=NO
FTP_SSL_SSLV3=NO
FTP_SSL_TLSV1=YES

# FTP restrictions
FTP_CHROOT_ENABLE=YES
FTP_CHROOT_LIST_ENABLE=NO

#==============================================================================
# SSL / TLS CONFIGURATION
#==============================================================================

# Let's Encrypt settings
ENABLE_LETSENCRYPT=false
LE_EMAIL=admin@example.local

# SSL cipher suite (modern compatibility)
SSL_CIPHER_SUITE="ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"

# SSL protocol support
SSL_PROTOCOL="TLSv1.2 TLSv1.3"

# HSTS settings (only for production domains, not .local)
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# OCSP Stapling
ENABLE_OCSP_STAPLING=true

#==============================================================================
# SECURITY & HARDENING
#==============================================================================

# UFW Firewall
ENABLE_UFW=true

# Fail2ban
ENABLE_FAIL2BAN=false
FAIL2BAN_MAX_RETRY=5
FAIL2BAN_FIND_TIME=600
FAIL2BAN_BAN_TIME=3600

# WordPress security
WP_DISALLOW_FILE_EDIT=true
WP_DISALLOW_FILE_MODS=false
WP_AUTOMATIC_UPDATER_DISABLED=false

# File permissions
WP_CONTENT_DIR_PERMS=755
WP_FILES_PERMS=644
WP_CONFIG_PERMS=600

#==============================================================================
# BACKUP & MAINTENANCE
#==============================================================================

# Backup settings
ENABLE_BACKUPS=false
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"

# WordPress cron
WP_DISABLE_CRON=true
WP_CRON_SCHEDULE="*/5 * * * *"

# Log rotation
LOG_ROTATION_SIZE=100M
LOG_ROTATION_COMPRESS=true
LOG_ROTATION_COPIES=4

#==============================================================================
# MONITORING & LOGGING
#==============================================================================

# Enable access logs
APACHE_ACCESS_LOG=true
APACHE_ERROR_LOG=true

# PHP logging
PHP_LOG_ERRORS=true
PHP_ERROR_LOG=/var/log/php/error.log

# MySQL logging
MYSQL_GENERAL_LOG=OFF
MYSQL_SLOW_QUERY_LOG=ON

# System logging
ENABLE_RSYSLOG=true

#==============================================================================
# DEVELOPMENT & DEBUGGING
#==============================================================================

# Development mode (enables debug features)
DEV_MODE=false

# WordPress debugging
WP_DEBUG_LOG=false
WP_DEBUG_DISPLAY=false

# PHP debugging
PHP_DISPLAY_ERRORS=Off
PHP_DISPLAY_STARTUP_ERRORS=Off

# Xdebug (development only)
ENABLE_XDEBUG=false
XDEBUG_MODE=debug
XDEBUG_START_WITH_REQUEST=trigger

#==============================================================================
# PERFORMANCE & CACHING
#==============================================================================

# Redis (optional caching layer)
ENABLE_REDIS=false
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=

# Memcached (alternative to Redis)
ENABLE_MEMCACHED=false
MEMCACHED_HOST=127.0.0.1
MEMCACHED_PORT=11211

# Browser caching
ENABLE_EXPIRES=true
EXPIRES_DEFAULT="access plus 1 month"
EXPIRES_TEXT="access plus 1 week"
EXPIRES_IMAGES="access plus 1 year"

#==============================================================================
# VAGRANT SPECIFIC (for local testing)
#==============================================================================

# Vagrant box
VAGRANT_BOX=bento/ubuntu-24.04

# Vagrant resources
VAGRANT_RAM=4096
VAGRANT_CPUS=2

# Vagrant networking
VAGRANT_IP=192.168.56.10

# Vagrant synced folder
VAGRANT_HOST_PATH=.